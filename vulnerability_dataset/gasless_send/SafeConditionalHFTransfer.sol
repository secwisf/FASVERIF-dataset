contract ClassicCheck {
       function isClassic() constant returns (bool isClassic);
}

contract SafeConditionalHFTransfer {

    bool classic;
    
    function SafeConditionalHFTransfer() {
        classic = ClassicCheck(0x882fb4240f9a11e197923d0507de9a983ed69239).isClassic();
    }
    
    function classicTransfer(address to) {
        if (!classic)
            if (!msg.sender.send(msg.value)){
                return True;
            }
            else{
                return False;
            }
        else
            if (!to.send(msg.value)){
                return True;
            }
            else{
                return False;
            }
    }
    
    function transfer(address to) {
        if (classic)
            if (!msg.sender.send(msg.value)){
                return True;
            }
            else{
                return False;
            }
        else
            if (!to.send(msg.value)){
                return True;
            }
            else{
                return False;
            }
    }
    
}